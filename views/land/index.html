{% extends 'base.html' %}

{% block content %}
<div class="block-header">
    <h2>Lands</h2>
</div>

<div class="card">
    <div class="card-header">
        <h2>Lorem Ipsum
            <small>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</small>
        </h2>
    </div>

    <div class="table-responsive">
        <table class="table table-hover table-vmiddle">
            <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for item in paginator.docs %}
            <tr>
                <td><a href="/admin/land/{{ item.id }}"><img src="https://dummyimage.com/100x70/cccccc/000000"/></a></td>
                <td><a href="/admin/land/{{ item.id }}">{{ item.name }}</a></td>
                <td>
                  {% if item.level == 'basic' %}
                    <span class="label label-info text-uppercase">{{ item.level }}</span>
                  {% elif item.level == 'pledge' %}
                    <span class="label label-warning text-uppercase">{{ item.level }}</span>
                  {% elif item.level == 'conserved' %}
                    <span class="label label-success text-uppercase">{{ item.level }}</span>
                  {% else %}
                    <span class="label label-default text-uppercase">{{ item.level }}</span>
                  {% endif %}
                </td>
                <td>{{ item.location }}</td>
                <td>{{ item.entity }}</td>
                <td>
                  {% if item.status == 'new' %}
                    <span class="label label-warning text-uppercase">{{ item.status }}</span>
                  {% elif item.status == 'denied' %}
                    <span class="label label-danger text-uppercase">{{ item.status }}</span>
                  {% elif item.status == 'approved' %}
                    <span class="label label-success text-uppercase">{{ item.status }}</span>
                  {% else %}
                    <span class="label label-default text-uppercase">{{ item.status }}</span>
                  {% endif %}
                </td>
                <td style="white-space: nowrap; width: 1%;">
                  <a href="/admin/land/{{ item.id }}" class="btn btn-default btn-icon waves-effect waves-circle"><span class="zmdi zmdi-edit"></span></a>
                  <a href="/admin/land/{{ item.id }}/remove" class="btn btn-default btn-icon waves-effect waves-circle remove-link"><span class="zmdi zmdi-delete"></span></a>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="7"><p class="text-center">Empty data.</p></td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="text-center">
        <ul class="pagination">
            <li {% if not paginator.has_previous_page %}class="disabled"{% endif %}>
              <a href="{% if not paginator.has_previous_page %}#{% else %}/admin/land?page={{ paginator.previous_page }}{% endif %}" aria-label="Previous"><i class="zmdi zmdi-chevron-left"></i></a>
            </li>
            <li {% if not paginator.has_next_page %}class="disabled"{% endif %}>
              <a href="{% if not paginator.has_next_page %}#{% else %}/admin/land?page={{ paginator.next_page }}{% endif %}" aria-label="Next"><i class="zmdi zmdi-chevron-right"></i></a>
            </li>
        </ul>
    </div>
</div>

<form id="delete-form" method="POST">
  <input type="hidden" name="crumb" value="{{crumb}}"/>
</form>

<a href="/admin/land/-1" class="btn btn-float btn-primary m-btn waves-effect waves-circle waves-float" data-toggle="tooltip" data-original-title="Add Land"><i class="zmdi zmdi-plus"></i></a>

{% endblock %}

{% block js_footer %}
<script type="text/javascript">
  $(document).ready(function () {

    var delete_form = $('#delete-form');

    $('.remove-link').click(function (event) {
      event.preventDefault();
      var self = $(this);
      swal({
        title: "¿Estas seguro?",
        text: "No podrás recuperar este recurso!",
        type: "warning",
        showCancelButton: true,
        confirmButtonColor: "#DD6B55",
        confirmButtonText: "Yes, eliminar!",
        cancelButtonText: "No, cancelar!",
        closeOnConfirm: true,
        closeOnCancel: true
      },
      function(isConfirm) {
        if (isConfirm) {
          var href = self.attr('href');
          delete_form.attr('action', href);
          delete_form.submit();
        }
      });
    });

  });
</script>
{% endblock %}